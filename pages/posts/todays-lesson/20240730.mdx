---
title: ãã‚‡ã†ã®ã¾ãªã³ï¼ˆ2024/07/30ï¼‰
date: 2024/7/29
description: ãã‚‡ã†ã®ã¾ãªã³ï¼ˆ2024/07/30ï¼‰
tag: ãã‚‡ã†ã®ã¾ãªã³
author: You
---

ãã‚‡ã†ã®ã¾ãªã³ã‚‚ã€RSSãƒ•ã‚£ãƒ¼ãƒ‰ã®ãƒªãƒ³ã‚¯ã«è¿½åŠ ã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸï¼
ï¼ˆRSSãƒ•ã‚£ãƒ¼ãƒ‰ã®ãƒªãƒ³ã‚¯ã¯[ã“ã¡ã‚‰](/feed.xml)ï¼‰

## 1. OpenVPN ã‚µãƒ¼ãƒã® ccd ãƒ•ã‚¡ã‚¤ãƒ«å‚ç…§ã§ Permission denied ã‚¨ãƒ©ãƒ¼

GCPã«å€‹äººã§OpenVPNã‚µãƒ¼ãƒã‚’ç«‹ã¦ã¦ã„ã‚‹ã®ã§ã™ãŒã€æœ€è¿‘ã€`Permission denied`ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¦ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®IPå›ºå®šãŒã§ããªããªã‚Šã¾ã—ãŸã€‚

```sh
$ systemctl status openvpn-server@server
# çœç•¥
     Active: active (running) since Sat 2024-07-27 06:12:09 UTC; 2 days ago
# çœç•¥
Jul 29 14:37:59 home-server.us-west1-b.c.kght6123.internal openvpn[965387]: homeserver/124.100.25.134:64518 Could not access file 'ccd/servername': Permission denied (errno=13)
Jul 29 14:37:59 home-server.us-west1-b.c.kght6123.internal openvpn[965387]: homeserver/124.100.25.134:64518 Could not access file 'ccd/DEFAULT': Permission denied (errno=13)
# çœç•¥
```

èª¿ã¹ã¦ã¿ã‚‹ã¨ã€ã‚µã‚¤ãƒ¬ãƒ³ãƒˆã§OpenVPNãŒã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã•ã‚Œã¦å†èµ·å‹•ã•ã‚Œã¦ã„ãŸã®ã§ã€ãã‚ŒãŒåŸå› ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

ãƒ•ã‚¡ã‚¤ãƒ«æ¨©é™ã£ã½ã„ã®ã§ã€æ¨©é™ã‚’å¤‰æ›´ã—ã¦ã¿ã¾ã—ãŸãŒè§£æ±ºã›ãšã€‚ã€‚ã€‚

```sh
# æ¨©é™ã®å¤‰æ›´
$ sudo chmod 644 /etc/openvpn/server/ccd/servername
$ sudo chown nobody:nobody /etc/openvpn/server/ccd/servername
$ sudo ls -alt /etc/openvpn/server/ccd/servername
-rw-r--r--. 1 nobody nobody 40 May 23 13:30 /etc/openvpn/server/ccd/servername
```

ã„ã‚ã„ã‚ã¨èª¿ã¹ã¦ã¿ãŸã‚‰ã€nobodyãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒä½¿ã‚ã‚Œã¦ã„ã‚‹ã®ã§ã€ãã‚Œã‚’å¤‰æ›´ã—ã¦ã¿ã¾ã—ãŸã€‚
ï¼ˆã‚‚ã¨ã‚‚ã¨nobodyãƒ¦ãƒ¼ã‚¶ãƒ¼ãªã®ã§ãŠã‹ã—ã„ï¼‰

```sh
# æ–°ã—ã„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ä½œæˆï¼ˆã™ã§ã«ã‚ã‚‹ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ï¼‰
$ sudo useradd -r -d /etc/openvpn -s /sbin/nologin openvpn
# CCDãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®æ‰€æœ‰è€…ã‚’æ–°ã—ã„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«å¤‰æ›´
$ sudo chown -R openvpn:openvpn /etc/openvpn/server/ccd
# server.confã«ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’æŒ‡å®š
$ sudo vi /etc/openvpn/server/server.conf
# ä¿®æ­£ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç¢ºèª
$ sudo diff /etc/openvpn/server/server.conf.20240522 /etc/openvpn/server/server.conf
22,23c22,23
< user nobody
< group nobody
---
> user openvpn
> group openvpn
28a29
> client-config-dir ccd
 
# OpenVPNã‚’å†èµ·å‹• â†’ è§£æ±ºï¼
sudo systemctl restart openvpn-server@server
sudo systemctl status openvpn-server@server
```

ãªãœã‹ã€è§£æ±ºã—ã¾ã—ãŸğŸ˜…

nobodyãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ‰±ã„ãŒå¤‰ã‚ã£ãŸã®ã‹ãªã€ã€ã€ï¼Ÿ

## 2. Mac/Safariã®Basicèªè¨¼ãŒãŠã‹ã—ã„

ä¸Šè¨˜ã®å•é¡Œã§ã€OpenVPNã®ã‚µãƒ¼ãƒãƒ¼ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚‚è§£æ±ºã—ã¦æ—©é€Ÿã€VPNçµŒç”±ã§å…¬é–‹ã—ã¦ã„ã‚‹ã‚µãƒ¼ãƒã¸ã‚¢ã‚¯ã‚»ã‚¹ã—ãŸã®ã§ã™ãŒBasicèªè¨¼ãŒãŠã‹ã—ããªã‚Šã¾ã—ãŸã€‚ï¼ˆä½•åº¦ã‚„ã£ã¦ã‚‚400ã‚¨ãƒ©ãƒ¼ï¼‰

ä»•æ–¹ãŒãªã„ã®ã§ã€ã‚­ãƒ¼ãƒã‚§ãƒ¼ãƒ³ã‚¢ã‚¯ã‚»ã‚¹ã§èªè¨¼æƒ…å ±ã‚’å‰Šé™¤ã—ã¦å†åº¦å…¥åŠ›ã—ã¦ã¿ãŸã‚‰ã€è§£æ±ºã—ã¾ã—ãŸã€‚
ï¼ˆã“ã“ã§ã‚‚ç½ ãŒã‚ã£ã¦ã€BASICèªè¨¼ã®ãƒ¦ãƒ¼ã‚¶ã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã§ä¿å­˜ã™ã‚‹ã¨ã¾ãŸåŒã˜çŠ¶æ³ã«æˆ»ã‚‹ã®ã§ã€æ³¨æ„ã™ã‚‹ï¼‰

ã‚ã¨ä½™è«‡ã§ã™ãŒã€MacOS 15ã‹ã‚‰ã€Œãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã€ã‚¢ãƒ—ãƒªãŒè¿½åŠ ã•ã‚Œã¾ã™ãŒã€
BASICèªè¨¼ã¯ãã®ã¾ã¾ã‚­ãƒ¼ãƒã‚§ãƒ¼ãƒ³ã‚¢ã‚¯ã‚»ã‚¹ã«å­˜åœ¨ã™ã‚‹ã‚ˆã†ã§ã™ã€‚ï¼ˆDeveloper Previewã®å ´åˆï¼‰

[GitHubã§è¨˜äº‹ã‚’è¦‹ã‚‹](https://github.com/kght6123/kght6123.page-v2/blob/main/pages/posts/todays-lesson/20240729.mdx)
